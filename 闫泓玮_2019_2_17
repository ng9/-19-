1、路由技术是Internet得以持续运转的关键所在
2、路由是指导IP报文发送的路径信息

3、IP路由过程：

4、路由器关键功能：（1）检查数据包的目的地
                                   （2）确定信息源
                                   （3）发现可能的路由 
                                   （4）选择最佳路由
                                   （5）验证和维护路由信息
5、路由匹配原则：（1）最长掩码匹配  ——  掩码越长越优
                               （2）管理性距离  ——  不同协议判断
                               （3）度量值  ——  相同协议度量值
6、路由优先级：当存在多个路由来源时，具有较高优先级（数值越小表明优先级越高）的路由来源提供的路由将被激活，用于指导报文的转发。
VRP缺省的路由优先级如下表：
路由协议                    优先级
DIRECT                        0
OSPF                          10
IS - IS                       15
STATIC                        60
RIP                           100
OSPF ASE                      150
7、路由的度量（Metric或Cost）
 （1）Path：A→B→C→D，总路由度量是9
 （2）Path：A→E→F→C→D，总路由度量是21
   路由器优选较小度量的路由，并加入到路由表中

8、例：192.168.1.0/24      E0
             192.168.1.0/25      E1（0—127）
             10.1.1.0/24            E2
             10.1.1.0/25            E3（0—127）
如果来了一条报文为192.168.1.1将匹配E1，应用最长掩码匹配原则   
如果来了一条报文为192.168.1.129将匹配E0 ，因为E1最长为127
如果来了一条报文为10.1.1.128将匹配E2 ，因为E3最长为127
如果来了一条报文为10.1.1.127将匹配E3 ，因为E3最长为127（包括127）
9、目的地址为9.1.2.1的数据报文，将命中9.1.0.0/16的路由
     目的地址为9.2.1.12的数据报文，将命中0.0.0.0/0的路由（默认路由）

10、直连路由：

Destination/Mask（网段）、proto（类型）、pre（优先级）、NextHop（下一跳）
11、静态路由：由网络管理员手工指定的路由；当网络拓扑发生变化时，管理员需要手工更新静态路由。（默认路由属于静态路由，对所有路由开放）
        动态路由：路由器使用路由协议从其他路由器那里获悉的路由；；当网络拓扑发生变化时，路由器会自动更新路由信息。
        ISIS是运营商的动态路由；IGRP是思科的内部网关协议，EIGRP是加强版
12、等价路由：同一个路由协议，到同一个目的地有几条相同度量值的路由时这些路由都会被加入到路由表中，IP包会在这几个链路上负载分担。（三个原则都一样，即为等价路由，实现负载分担）
A到D两条等价路径：A→B→C→D，总开销：5+5+8=18
                                 A→C→D，总开销：10+8=18

13、路由（流量负载）、交换机（包负载）
等价路由，实现负载分担，如下表

14、静态路由配置：在路由器B上配置到达路由器A的10.1.1.1网段的静态路由

三种方法：1.【RTB】ip   route-static    10.1.1.1    255.255.255.255    1.1.1.1
                 2.【RTB】ip   route-static    10.1.1.1    32（掩码）    1.1.1.1
                 3.【RTB】ip   route-static    10.1.1.1    S0（出口）    1.1.1.1
配置成功情况如下图：

在【RTB】输入display  ip  routing-table可查看配置情况
15、静态路由的负载分担：在路由器B上配置到达路由器A的10.1.1.1网段的三条负载路由

配置过程：【RTB】ip  route-static   10.1.1.1     255.255.255.255     1.1.1.1
                 【RTB】ip  route-static   10.1.1.1     255.255.255.255     2.2.2.1
                 【RTB】ip  route-static   10.1.1.1     255.255.255.255     3.3.3.1
如果一或两条断了的话，剩下的两或一条可继续工作，不影响
配置成功如下图：

16、静态路由的路由备份：在路由器B上配置到达路由器A的10.1.1.1网段的备份路由

配置过程：【RTB】ip  route-static   10.1.1.1     255.255.255.255     1.1.1.1
                 【RTB】ip  route-static   10.1.1.1     255.255.255.255     2.2.2.1       preference  100
 pr（preference）即优先级，也叫AD值 。默认AD值为60
配置成功如下图：

在【RTB】上输入display  ip  routing-table  protocol  static可查看
17、路由备份

优先级高，主用路由，加入到路由表；优先级低，备用路由，不加入到路由表，依据三条原则

方法：在【RTB-Serial 0(即S0)】上输入shutdown，断开主用链路，备份路由自动变为主动路由加入到路由表中
18、默认路由是一种特殊的路由，可以通过静态路由配置，某些动态路由协议也可以生成缺省路由，如OSPF和IS-IS
       在路由表中，默认路由以到网络0.0.0.0（掩码为0.0.0.0）的形式出现
       当路由器收到一个在路由表中匹配不到明确路由的数据包时，会将数据包转发给默认路由指向的下一跳                                  所有数据包都可以匹配默认路由            默认路由如下图：

